# BE 시스템 작업 정의

Created: 2022년 1월 10일 오후 1:52
Last Edited Time: 2022년 1월 18일 오후 4:10
Stakeholders: 익명, 익명, 익명
Status: In Progress
날짜: 2022년 1월 11일
상태: 진행 중
속성: 익명, 익명, 익명

#### 시스템 커맨드

- 정렬하고 반환하는 커맨드를 search 혹은 fetch로 할지 통일
- db 에서 정렬할지, back 에서 할지 고민
- fetch → 최신순, serach → 백단에서 정렬

| 액터 | 스토리 | 커맨드 | 설명 |  |
| --- | --- | --- | --- | --- |
| Post |  |  |  |  |
|  | 포스트 생성 | createPost() | 포스트를 생성한다 |  |
|  | 포스트 삭제 | deletePost() | 포스트를 삭제한다 |  |
|  | 포스트 수정 | updatePost() | 포스트 글을 수정한다 |  |
|  | 댓글 생성 | createComment() | 댓글을 생성한다 |  |
|  | 댓글 삭제 | deleteComment() | 댓글을 삭제한다 |  |
|  | 해시태그로 포스트 검색 | searchPostsByHashTag() | 해시태그로 포스트 여러개 검색 |  |
|  | 유저 해시태그로 포스트 검색 | searchPostsByUserHashTag() | 유저 해시태그로 포스트 여러개 검색 |  |
|  | Best 게시물 검색 | searchBestPosts() | 베스트 포스트 다수를 인기도(미정) 기준으로 정렬해서 보여준다 |  |
| Member | 팔로우 | changeFollowing() | 다른 사용자를 팔로우한다 |  |
|  | 포스트 좋아요 | changePostLike() | 포스트를 좋아요 한다 |  |
|  | 평가 생성 | createEvaluation() | 평가를 생성한다 (해시태그, 별점) |  |
|  | 평가 수정 | updateEvaluation() | 평가를 수정한다 (해시태그, 별점) |  |
|  | 회원가입 | signup() | 회원가입을 한다 |  |
|  | 로그인 | login() | 로그인을 한다  |  |
|  | 회원탈퇴 | withdraw() | 회원탈퇴를 한다  |  |
|  | 닉네임 중복 확인 | validateMemberNickName() | 회원 가입 중 사용하려는 닉네임이 이미 사용중인지 확인한다 |  |
|  | 프로필 수정 | updateProfile() | 프로필을 수정한다 |  |
|  | 프로필 색 변경 | changeProfileColor() | 프로필 색 변경 |  |
| Beer | Best 맥주 조회 | searchBestBeer() | 베스트 맥주캔을 좋아요 기준으로 여러개 정렬해서 보여준다  |  |
|  | 맥주 좋아요 | changeBeerLike() | 맥주를 좋아요 한다 |  |
|  | 맥주 조회 by BeerType 좋아요 순 정렬 | searchBeerByBeerType() | 타입에 따른 맥주를 ???좋아요??? 기준으로 정렬해서 보여준다 |  |
|  | 해시태그로 맥주 검색 | searchBeersByHashTag() | 해시태그로 맥주 여러개 검색 |  |
| Recommend | 맥주 추천 | recommendBeer() | 맥주캔을 추천한다  |  |
|  |  |  |  |  |
| admin | 맥주 정보 생성 | createBeer() | 맥주 정보를 생성한다  |  |
|  | 맥주 정보 수정 | updateBeer() | 맥주 정보를 수정한다  |  |
|  | 맥주 정보 삭제  | deleteBeer() | 맥주 정보를 삭제한다  |  |
|  | 포스트 수정 | updatePost() | 포스트 정보를 수정한다  |  |
|  | 포스트 삭제 | deletePost() | 포스트 정보를 삭제한다 |  |
|  | 사용자 삭제 | deleteUser() | 사용자를 삭제한다 |  |
|  | 사용자 정지 | stopUser() | 사용자를 정지시킨다 |  |
|  |  |  |  |  |
| 후 순위 | 포스트, 맥주 좋아요 한 사람 확인??? |  |  |  |
|  | 맥주 싫어요 → 의견 종합 필요
→ 후 순위로 조정 | changeBeerDislike() | 싫어하는 맥주를 표시한다 |  |
|  | 사용자 검색 후순위 |  |  |  |
|  |  |  |  |  |
| 삭제 | 취향 생성 | createFond() | 취향을 생성한다 |  |
| 삭제 | 취향 삭제 | deleteFond() | 취향을 삭제한다 |  |
| 삭제 | 취향 수정 | updateFond() | 취향을 수정한다 |  |
| 삭제 | 로그아웃 | logout() | 로그아웃을 한다  |  |
| 삭제 | 프로필 사진 선택하기 | selectProfileImg() | 프로필 이미지를 수정한다 // updateProfile() 해야 db에 적용 |  |
|  | 댓글 수정 | updateComment() | 댓글을 수정한다  |  |

#### 쿼리

| 액터 | 스토리 | 쿼리 | 설명 |
| --- | --- | --- | --- |
| Member | 해당 맥주 포스트 다수 조회 | fetchPostsByBeerId() | 맥주의 포스트를 여러개 조회한다 |
|  | 포스트 다수 조회 // 최신순 | fetchPosts() | 포스트를 여러개 조회한다  |
|  | 포스트 하나 조회 | fetchPostByPostId() | 포스트 하나를 조회한다 +2022.01.16 Id가 PostId? |
|  | 사용자 포스트 다수 조회 | fetchPostsByMemberId() | 사용자 번호로 포스트 여러개 조회한다  |
|  | 포스트 다수 조회 // 인기순 | fetchPostsByPopularity() | 포스트 여러개를 인기순으로 정렬한 후 조회한다 |
|  | 맥주 정보 다수 조회 | fetchBeers() | 맥주 정보 여러개 조회한다 |
|  | 게시물 많이 올린 사람 순위 조회 | fetchRankingMostPosted() | 게시물을 많이 올린 사람들 순위로 해서 조회한다  |
|  | 맥주 세부사항 조회 | fetchBeerDetail() | 맥주 세부사항 정보 1개 조회한다 |
|  | 좋아요 가장 많은 포스트 조회 | fetchPostMostLiked() | 좋아요가 가장 많은 포스트를 조회한다  |
|  | 좋아요 가장 많은 맥주 | fetchBeerMostLiked() | 좋아요가 가장 많은 맥주를 조회한다 |
|  | 리뷰가 가장 많은 맥주 | fetchBeerMostReviewed() | 리뷰가 가장 많은 맥주를 조회한다 |
|  | 팔로워 조회 | fetchFollowers() | 사용자의 팔로워들을 여러개 조회한다 |
|  | 팔로잉 조회 | fetchFollowings() | 사용자가 팔로우 하는 대상을 여러개 조회한다 |
|  | 프로필 조회 | fetchProfile() | 사용자에 해당하는 프로필 1개를 조회한다 |
|  | 댓글 조회 | fetchComments() | 포스트에 있는 댓글들을 여러개 조회한다 |
|  | 프로필 컬러 조회 | fetchProfileColor() | 프로필 컬러를 조회한다 |
|  | 좋아요 한 맥주 조회 | fetchLikedBeer() | 좋아요한 맥주 여러개를 조회한다 // 좋아요 시간순으로 정렬? |
|  | 멤버 작성 맥주 평가 조회 | fetchEvaluationsByMemberId() | 멤버가 작성한 맥주 평가를 여러 개 조회한다  |
|  | 멤버가 작성한 해당 맥주 평가 하나 조회 | fetchBeerEvaluationByMemberId() | 멤버가 작성한 맥주 평가 하나를 조회한다 |
|  |  |  |  |
| admin | 맥주 정보 조회 | fetchBeerList() | 관리자가 맥주 정보를 조회한다  |
|  | 맥주 정보 상세 조회 | fetchBeerDetail() | 관리자가 맥주 상세 정보를 조회한다  |
|  | 모든 사용자 조회 | fetchUsers() | 관리자가 모든 사용자 정보를 조회한다 |
|  | 사용자 상세 조회 | fetchUserDetail() | 관리자가 사용자 상세 정보를 조회한다 + 정지 횟수? |
|  | 모든 포스트 조회 | fetchPosts() | 관리자가 모든 포스트 정보를 조회한다 |
|  | 포스트 조회 | fetchPost() | 관리자가 포스트 정보를 조회한다 |
|  |  |  |  |
|  |  |  |  |
| 삭제 | 맥주의 타입 조회 | fetchBeerType() // main? detail? | 맥주의 타입을 여러개 조회한다 |
|  | 좋아요 한 포스팅 조회 | fetchLikedPost() | 좋아요한 포스팅을 여러 개 조회 |
|  | 해시태그로 맥주 검색 | fetchBeersByHashTag() | 해시태그로 맥주 여러개 검색 |
|  | 평가 다수 조회 | fetchBeerRatesByMemberId() | 멤버가 작성한 맥주 평가를 여러 개 조회한다  |
|  | 취향 조회 | fetchFond() | 사용자의 취향 1개를  조회한다 |
|  | 해시태그로 포스트 검색 | fetchPostsByHashTag() | 해시태그로 포스트 검색 |