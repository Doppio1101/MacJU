# 01/18 컨설턴팅

Created: 2022년 1월 18일 오전 11:59
Last Edited Time: 2022년 1월 18일 오후 2:26

### 질문

- 조회수 로그 - 로그 수집 (로그 ELK stack, Log4j2) 인기도 기준 좋아요 댓글 조회수? // 캐시 redis 중복값 상관 X // 능률만 오르게 함 /
- MSA - 어느 정도까지 분할 해야 하는지 // auth DB
- 통합 검색 기능 구현 - 자동완성 기능을 구현할 경우 서버에 무리 + 검색 결과가 많아짐
해결 방안 // 캐시테이블 redis 구조 복구 알고리즘 HA 고가용성
- 정렬을 DB에서 할지, backend 단에서 해야할지??
- 백에서 프론트로 한번에 데이터를 몇 개씩 보내야 할지
- 쿠버네티스나 도커는 흠?

### 답변

캐시 도입 여부

조회수를 1분단위로 캐시를 읽어 Update

직전값과 새로운 값과의 비교를 통해 %로 증가율이 높을 경우 선택

RDB에서 해도 가능하긴 함....근데 낭비임

캐시를 도입 계획이 있을경우 위 방법 실행

없을 경우 RDB에 구현하되 트래픽 문제가 있을 수 있음

캐시에 POST 해시태그를 인덱스 형식으로 저장(?)

캐시를 풀스캔 돈다(post id 리스트를 필터링함)

=> DB에서 가져옴

=> DB설계시 달라지는 부분 => 해시태그만 가져올 수 있도록 normalization(?)

자주 호출되는 영역/ 자주 호출되지 않은 영역으로 구분

서버의 분류기준이 애매하다 => 트래픽이 낮으면 그냥 하나로 때려박음

1. 트래픽을 고려함
2. 보안적인 요소를 고려함

아키텍처 admin user DB 수정

DB 쪼개기에 resource가 추가될거같진 않다

서버 쪼개기에는 resource가 추가될 것같다

보안은 더 고려할 필요가 없다

admin DB의 역할이 단순히 맥주 포스트 사용자 관리인지

아니면 allauth까지 관리 가능한건지

컨설턴트라면 USER를 분리한다

사용자 삭제 요청 => admin DB보다는 Auth DB로 수정 삭제하는게 맞지 않나....라는게 컨설턴트님 생각

firebase 접근은 어떻게 할것인지

정렬은 어디서하는게 효율적인가?

실시간으로 할 경우 DB를 풀스캔 ?

이 기능이 얼마나 실시간 성으로 보여줘야 하는가? 가 관건임.( 이러한 니즈가 중요한가?)

프론트에서 정렬하는것 vs view를 사용하는 것.

스프린트

중요한 기능

먼저 구현해야 하는 기능

?

순으로 소팅